This job can be monitored from: https://scruffy.c3se.chalmers.se/d/alvis-job/alvis-job?var-jobid=65779&from=1619524750000
/tmp/slurmd/job65779/slurm_script: line 10: deactivate: command not found
/tmp/slurmd/job65779/slurm_script: line 19: start: command not found
Starting at Tue Apr 27 13:59:10 CEST 2021
Job Name - EffNet
Running on hosts: alvis1-10
Running on 1 nodes.
Running 1 tasks.
Current working directory is /cephyr/users/filipfri/Alvis/BscProject
10.2
tensor([1.], device='cuda:0')
Using image size:  224
Using filter:  
Training set : 
Successfully loaded: P19_1_1
Successfully loaded: P19_1_2
Successfully loaded: P19_2_1
Successfully loaded: P19_2_2
Successfully loaded: P19_3_1
Successfully loaded: P19_3_2
Successfully loaded: P20_1_3
Successfully loaded: P20_1_4
Successfully loaded: P20_2_2
Successfully loaded: P20_2_3
Successfully loaded: P20_2_4
Successfully loaded: P20_3_1
Successfully loaded: P20_3_2
Successfully loaded: P20_3_3
Successfully loaded: P20_4_1
Successfully loaded: P20_4_2
Successfully loaded: P20_4_3
Successfully loaded: P20_5_1
Successfully loaded: P20_5_2
Successfully loaded: P20_6_1
Successfully loaded: P20_6_2
Successfully loaded: P20_7_1
Successfully loaded: P20_7_2
Successfully loaded: P20_8_1
Successfully loaded: P20_8_2
Successfully loaded: P20_9_1
Successfully loaded: P20_9_2
Successfully loaded: P9_1_1
Successfully loaded: P9_2_1
Successfully loaded: P9_2_2
Successfully loaded: P9_3_1
Successfully loaded: P9_3_2
Successfully loaded: P9_4_1
Successfully loaded: P9_4_2
Testing set : 
Successfully loaded: N10_1_1
Successfully loaded: N10_1_2
Successfully loaded: N10_1_3
Successfully loaded: N10_2_1
Successfully loaded: N10_2_2
Successfully loaded: P13_1_1
Successfully loaded: P13_1_2
Successfully loaded: P13_2_1
Successfully loaded: P13_2_2
Successfully loaded: P28_7_5
Successfully loaded: P28_8_5
Successfully loaded: P28_10_4
Successfully loaded: P28_10_5
split: 0
[572, 1573, 3382, 6965]
inflammatory appears 572 times in the non augmented training and validation set
inflammatory appears 5148 times in the augmented training and validation set
lymphocyte appears 1573 times in the non augmented training and validation set
lymphocyte appears 7865 times in the augmented training and validation set
fibroblast and endothelial appears 3382 times in the non augmented training and validation set
fibroblast and endothelial appears 6764 times in the augmented training and validation set
epithelial appears 6965 times in the non augmented training and validation set
epithelial appears 13930 times in the augmented training and validation set
train size: 33707
val size: 3124
test size: 11318
Available GPUs: 1
Loaded pretrained weights for efficientnet-b0
=> using pre-trained model 'efficientnet-b0'
[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Epoch: [0][   0/1054]	Time  3.692 ( 3.692)	Data loading time  3.354 ( 3.354)	Loss 1.3520e+00 (1.3520e+00)	Acc@1  46.88 ( 46.88)
Epoch: [0][ 100/1054]	Time  0.089 ( 0.124)	Data loading time  0.009 ( 0.042)	Loss 1.1588e+00 (1.2125e+00)	Acc@1  46.88 ( 45.88)
Epoch: [0][ 200/1054]	Time  0.091 ( 0.107)	Data loading time  0.011 ( 0.026)	Loss 8.8026e-01 (1.1383e+00)	Acc@1  65.62 ( 50.08)
Epoch: [0][ 300/1054]	Time  0.089 ( 0.101)	Data loading time  0.009 ( 0.020)	Loss 8.3341e-01 (1.1144e+00)	Acc@1  62.50 ( 51.28)
Epoch: [0][ 400/1054]	Time  0.090 ( 0.098)	Data loading time  0.010 ( 0.018)	Loss 1.0956e+00 (1.0948e+00)	Acc@1  53.12 ( 52.15)
Epoch: [0][ 500/1054]	Time  0.089 ( 0.097)	Data loading time  0.009 ( 0.016)	Loss 9.2241e-01 (1.0807e+00)	Acc@1  59.38 ( 53.05)
Epoch: [0][ 600/1054]	Time  0.090 ( 0.095)	Data loading time  0.010 ( 0.015)	Loss 9.3727e-01 (1.0639e+00)	Acc@1  50.00 ( 53.85)
Epoch: [0][ 700/1054]	Time  0.089 ( 0.094)	Data loading time  0.009 ( 0.014)	Loss 9.9658e-01 (1.0571e+00)	Acc@1  56.25 ( 54.15)
Epoch: [0][ 800/1054]	Time  0.090 ( 0.094)	Data loading time  0.010 ( 0.014)	Loss 8.7590e-01 (1.0447e+00)	Acc@1  68.75 ( 54.72)
Epoch: [0][ 900/1054]	Time  0.090 ( 0.093)	Data loading time  0.010 ( 0.013)	Loss 6.5804e-01 (1.0330e+00)	Acc@1  81.25 ( 55.42)
Epoch: [0][1000/1054]	Time  0.089 ( 0.093)	Data loading time  0.009 ( 0.013)	Loss 9.1376e-01 (1.0241e+00)	Acc@1  62.50 ( 55.94)
[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Validation: [ 0/98]	Time  3.266 ( 3.266)	Loss 6.1984e-01 (6.1984e-01)	Acc@1  71.88 ( 71.88)	Acc C1   0.00 (  0.00)	Acc C2   0.00 (  0.00)	Acc C3   0.00 (  0.00)	Acc C4 100.00 (100.00)
 * Acc 55.090
classification report:
              precision    recall  f1-score   support

           0       0.04      0.01      0.01       143
           1       0.06      0.01      0.01       394
           2       0.33      0.02      0.04       846
           3       0.57      0.98      0.72      1741

    accuracy                           0.55      3124
   macro avg       0.25      0.25      0.20      3124
weighted avg       0.42      0.55      0.41      3124

confusion matrix:
      t\p     0     1     2     3 
       0      1     3     6   133 
       1      3     3    17   371 
       2      9    26    18   793 
       3     12    17    13  1699 

[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Test: [  0/354]	Time  3.231 ( 3.231)	Loss 1.6237e-01 (1.6237e-01)	Acc@1 100.00 (100.00)	Acc C1   0.00 (  0.00)	Acc C2   0.00 (  0.00)	Acc C3   0.00 (  0.00)	Acc C4 100.00 (100.00)
Test: [100/354]	Time  0.034 ( 0.065)	Loss 2.2460e+00 (1.3853e+00)	Acc@1   0.00 ( 53.96)	Acc C1   0.00 (  0.00)	Acc C2   0.00 (  0.00)	Acc C3   0.00 (  1.65)	Acc C4 100.00 ( 99.42)
Test: [200/354]	Time  0.034 ( 0.050)	Loss 4.1849e+00 (1.7047e+00)	Acc@1   0.00 ( 52.53)	Acc C1   0.00 (  0.00)	Acc C2   0.00 (  0.00)	Acc C3   0.00 (  1.68)	Acc C4  81.82 ( 98.91)
Test: [300/354]	Time  0.034 ( 0.044)	Loss 3.5249e-01 (1.9144e+00)	Acc@1  96.88 ( 44.94)	Acc C1   0.00 (  0.13)	Acc C2   0.00 (  0.16)	Acc C3   0.00 (  2.23)	Acc C4 100.00 ( 98.82)
 * Acc 41.332
classification report:
              precision    recall  f1-score   support

           0       0.08      0.00      0.00      1141
           1       0.08      0.00      0.00      2324
           2       0.36      0.02      0.04      3196
           3       0.42      0.99      0.59      4657

    accuracy                           0.41     11318
   macro avg       0.23      0.25      0.16     11318
weighted avg       0.30      0.41      0.25     11318

confusion matrix:
      t\p     0     1     2     3 
       0      2     3    30  1106 
       1      3     3    72  2246 
       2     11    13    73  3099 
       3      9    18    30  4600 

[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Epoch: [1][   0/1054]	Time  3.355 ( 3.355)	Data loading time  3.266 ( 3.266)	Loss 9.3453e-01 (9.3453e-01)	Acc@1  59.38 ( 59.38)
Epoch: [1][ 100/1054]	Time  0.090 ( 0.122)	Data loading time  0.008 ( 0.041)	Loss 8.1281e-01 (9.4185e-01)	Acc@1  71.88 ( 61.08)
Epoch: [1][ 200/1054]	Time  0.089 ( 0.106)	Data loading time  0.009 ( 0.025)	Loss 1.0423e+00 (9.1361e-01)	Acc@1  56.25 ( 62.75)
Epoch: [1][ 300/1054]	Time  0.090 ( 0.101)	Data loading time  0.010 ( 0.020)	Loss 8.0630e-01 (9.0551e-01)	Acc@1  78.12 ( 63.03)
Epoch: [1][ 400/1054]	Time  0.090 ( 0.098)	Data loading time  0.010 ( 0.018)	Loss 8.5691e-01 (8.9733e-01)	Acc@1  56.25 ( 63.21)
Epoch: [1][ 500/1054]	Time  0.091 ( 0.096)	Data loading time  0.011 ( 0.016)	Loss 8.7354e-01 (8.9804e-01)	Acc@1  59.38 ( 63.14)
Epoch: [1][ 600/1054]	Time  0.090 ( 0.095)	Data loading time  0.010 ( 0.015)	Loss 7.4051e-01 (8.9327e-01)	Acc@1  68.75 ( 63.39)
Epoch: [1][ 700/1054]	Time  0.090 ( 0.095)	Data loading time  0.010 ( 0.015)	Loss 7.3191e-01 (8.9008e-01)	Acc@1  68.75 ( 63.62)
Epoch: [1][ 800/1054]	Time  0.090 ( 0.094)	Data loading time  0.009 ( 0.014)	Loss 7.2967e-01 (8.8466e-01)	Acc@1  75.00 ( 63.94)
Epoch: [1][ 900/1054]	Time  0.090 ( 0.094)	Data loading time  0.008 ( 0.013)	Loss 1.0355e+00 (8.7983e-01)	Acc@1  62.50 ( 64.19)
Epoch: [1][1000/1054]	Time  0.089 ( 0.093)	Data loading time  0.008 ( 0.013)	Loss 6.4831e-01 (8.7457e-01)	Acc@1  75.00 ( 64.42)
[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Validation: [ 0/98]	Time  3.236 ( 3.236)	Loss 5.6577e-01 (5.6577e-01)	Acc@1  75.00 ( 75.00)	Acc C1   0.00 (  0.00)	Acc C2  50.00 ( 50.00)	Acc C3  20.00 ( 20.00)	Acc C4  91.30 ( 91.30)
 * Acc 71.735
classification report:
              precision    recall  f1-score   support

           0       0.30      0.08      0.13       143
           1       0.49      0.35      0.41       394
           2       0.75      0.48      0.58       846
           3       0.75      0.97      0.84      1741

    accuracy                           0.72      3124
   macro avg       0.57      0.47      0.49      3124
weighted avg       0.69      0.72      0.69      3124

confusion matrix:
      t\p     0     1     2     3 
       0     12    32    44    55 
       1      8   139    66   181 
       2     18    88   403   337 
       3      2    26    26  1687 

[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Test: [  0/354]	Time  3.255 ( 3.255)	Loss 2.3716e-01 (2.3716e-01)	Acc@1 100.00 (100.00)	Acc C1   0.00 (  0.00)	Acc C2   0.00 (  0.00)	Acc C3   0.00 (  0.00)	Acc C4 100.00 (100.00)
Test: [100/354]	Time  0.034 ( 0.065)	Loss 2.9473e+00 (1.4799e+00)	Acc@1   0.00 ( 54.08)	Acc C1   0.00 (  1.71)	Acc C2   0.00 ( 17.95)	Acc C3   0.00 (  2.27)	Acc C4 100.00 ( 96.61)
Test: [200/354]	Time  0.034 ( 0.050)	Loss 1.3225e+00 (1.3610e+00)	Acc@1  31.25 ( 55.36)	Acc C1   0.00 (  1.94)	Acc C2  30.43 ( 12.22)	Acc C3  75.00 ( 11.32)	Acc C4   0.00 ( 96.01)
Test: [300/354]	Time  0.034 ( 0.044)	Loss 3.8925e-01 (1.3666e+00)	Acc@1  96.88 ( 52.46)	Acc C1   0.00 (  2.22)	Acc C2   0.00 ( 13.06)	Acc C3  22.22 ( 23.77)	Acc C4 100.00 ( 96.25)
 * Acc 49.753
classification report:
              precision    recall  f1-score   support

           0       0.25      0.04      0.06      1141
           1       0.31      0.14      0.19      2324
           2       0.46      0.25      0.32      3196
           3       0.53      0.96      0.69      4657

    accuracy                           0.50     11318
   macro avg       0.39      0.35      0.32     11318
weighted avg       0.44      0.50      0.42     11318

confusion matrix:
      t\p     0     1     2     3 
       0     42   184   238   677 
       1     52   323   596  1353 
       2     56   447   786  1907 
       3     16    76    85  4480 

slurmstepd: error: *** JOB 65779 ON alvis1-10 CANCELLED AT 2021-04-27T14:05:43 ***
