This job can be monitored from: https://scruffy.c3se.chalmers.se/d/alvis-job/alvis-job?var-jobid=61318&from=1618155014000
/tmp/slurmd/job61318/slurm_script: line 10: deactivate: command not found
/tmp/slurmd/job61318/slurm_script: line 17: start: command not found
Starting at Sun Apr 11 17:30:14 CEST 2021
Job Name - EffNet
Running on hosts: alvis1-01
Running on 1 nodes.
Running 1 tasks.
Current working directory is /cephyr/users/filipfri/Alvis/BscProject
10.2
tensor([1.], device='cuda:0')
Using image size:  32
Using filter:  
Training set : 
Successfully loaded: P19_1_1
Successfully loaded: P19_1_2
Successfully loaded: P19_2_1
Successfully loaded: P19_2_2
Successfully loaded: P19_3_1
Successfully loaded: P19_3_2
Successfully loaded: P20_1_3
Successfully loaded: P20_1_4
Successfully loaded: P20_2_2
Successfully loaded: P20_2_3
Successfully loaded: P20_2_4
Successfully loaded: P20_3_1
Successfully loaded: P20_3_2
Successfully loaded: P20_3_3
Successfully loaded: P20_4_1
Successfully loaded: P20_4_2
Successfully loaded: P20_4_3
Successfully loaded: P20_5_1
Successfully loaded: P20_5_2
Successfully loaded: P20_6_1
Successfully loaded: P20_6_2
Successfully loaded: P20_7_1
Successfully loaded: P20_7_2
Successfully loaded: P20_8_1
Successfully loaded: P20_8_2
Successfully loaded: P20_9_1
Successfully loaded: P20_9_2
Successfully loaded: P9_1_1
Successfully loaded: P9_2_1
Successfully loaded: P9_2_2
Successfully loaded: P9_3_1
Successfully loaded: P9_3_2
Successfully loaded: P9_4_1
Successfully loaded: P9_4_2
Testing set : 
Successfully loaded: N10_1_1
Successfully loaded: N10_1_2
Successfully loaded: N10_1_3
Successfully loaded: N10_2_1
Successfully loaded: N10_2_2
Successfully loaded: P13_1_1
Successfully loaded: P13_1_2
Successfully loaded: P13_2_1
Successfully loaded: P13_2_2
Successfully loaded: P28_7_5
Successfully loaded: P28_8_5
Successfully loaded: P28_10_4
Successfully loaded: P28_10_5
inflammatory appears 715 times in the non augmented training and validation set
inflammatory appears 6435 times in the augmented training and validation set
lymphocyte appears 1967 times in the non augmented training and validation set
lymphocyte appears 9835 times in the augmented training and validation set
fibroblast and endothelial appears 4228 times in the non augmented training and validation set
fibroblast and endothelial appears 8456 times in the augmented training and validation set
epithelial appears 8706 times in the non augmented training and validation set
epithelial appears 10706 times in the augmented training and validation set
split:  0
[5148, 7868, 6764, 8565]
train size: 28345
val size: 7087
test size: 11318
Available GPUs: 1
Loaded pretrained weights for efficientnet-b0
=> using pre-trained model 'efficientnet-b0'
[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Epoch: [0][  0/886]	Time  3.613 ( 3.613)	Data loading time  3.418 ( 3.418)	Loss 1.4404e+00 (1.4404e+00)	Acc@1  28.12 ( 28.12)
Epoch: [0][110/886]	Time  0.039 ( 0.071)	Data loading time  0.000 ( 0.031)	Loss 1.7803e+00 (1.7506e+00)	Acc@1  43.75 ( 27.87)
Epoch: [0][220/886]	Time  0.039 ( 0.055)	Data loading time  0.000 ( 0.016)	Loss 1.3756e+00 (1.7841e+00)	Acc@1  21.88 ( 28.00)
Epoch: [0][330/886]	Time  0.039 ( 0.050)	Data loading time  0.000 ( 0.011)	Loss 1.3000e+00 (1.7937e+00)	Acc@1  37.50 ( 28.75)
Epoch: [0][440/886]	Time  0.040 ( 0.047)	Data loading time  0.000 ( 0.008)	Loss 1.6492e+00 (1.7797e+00)	Acc@1  31.25 ( 28.62)
Epoch: [0][550/886]	Time  0.040 ( 0.046)	Data loading time  0.000 ( 0.006)	Loss 1.4822e+00 (1.7137e+00)	Acc@1  34.38 ( 29.06)
Epoch: [0][660/886]	Time  0.040 ( 0.045)	Data loading time  0.000 ( 0.005)	Loss 1.3808e+00 (1.6630e+00)	Acc@1  28.12 ( 28.78)
Epoch: [0][770/886]	Time  0.040 ( 0.044)	Data loading time  0.000 ( 0.005)	Loss 1.2944e+00 (1.6240e+00)	Acc@1  28.12 ( 29.05)
Epoch: [0][880/886]	Time  0.040 ( 0.043)	Data loading time  0.000 ( 0.004)	Loss 1.4138e+00 (1.5926e+00)	Acc@1  21.88 ( 29.49)
Validation:
[W CudaIPCTypes.cpp:22] Producer process has been terminated before all shared CUDA tensors released. See Note [Sharing CUDA tensors]
Validation: [  0/222]	Time  3.219 ( 3.219)	Loss 1.3532e+00 (1.3532e+00)	Acc@1  40.62 ( 40.62)	Acc C1   0.00 (  0.00)	Acc C2  40.00 ( 40.00)	Acc C3  12.50 ( 12.50)	Acc C4  80.00 ( 80.00)
Validation: [110/222]	Time  0.015 ( 0.045)	Loss 1.3264e+00 (1.3768e+00)	Acc@1  40.62 ( 33.05)	Acc C1   0.00 (  0.43)	Acc C2  66.67 ( 44.07)	Acc C3   0.00 ( 10.46)	Acc C4  84.62 ( 62.69)
Validation: [220/222]	Time  0.014 ( 0.031)	Loss 1.3099e+00 (1.3692e+00)	Acc@1  37.50 ( 33.24)	Acc C1   0.00 (  0.39)	Acc C2  62.50 ( 42.84)	Acc C3  16.67 (  9.02)	Acc C4  42.86 ( 63.25)
 * Acc 33.230
classification report:
              precision    recall  f1-score   support

           0       0.24      0.00      0.01      1287
           1       0.29      0.43      0.35      1967
           2       0.35      0.09      0.14      1692
           3       0.36      0.63      0.46      2141

    accuracy                           0.33      7087
   macro avg       0.31      0.29      0.24      7087
weighted avg       0.32      0.33      0.27      7087

confusion matrix:
      t\p     0     1     2     3 
        0     5   586    97   599 
        1     4   843   133   987 
        2     6   714   152   820 
        3     6   724    56  1355 
Traceback (most recent call last):
  File "main.py", line 328, in <module>
    main()
  File "main.py", line 315, in main
    model = run_model(loaders, split_counter, args, class_names,num_item_per_class)
  File "/cephyr/users/filipfri/Alvis/BscProject/run_model.py", line 54, in run_model
    return main_worker(loaders, split, args.gpu, ngpus, args, num_item_per_class)
  File "/cephyr/users/filipfri/Alvis/BscProject/run_model.py", line 180, in main_worker
    }, is_best, split, output_destination)
  File "/cephyr/users/filipfri/Alvis/BscProject/run_model.py", line 357, in save_checkpoint
    torch.save(state, destination + filename)
  File "/cephyr/users/filipfri/Alvis/clusterEnv/lib/python3.6/site-packages/torch/serialization.py", line 369, in save
    with _open_file_like(f, 'wb') as opened_file:
  File "/cephyr/users/filipfri/Alvis/clusterEnv/lib/python3.6/site-packages/torch/serialization.py", line 230, in _open_file_like
    return _open_file(name_or_buffer, mode)
  File "/cephyr/users/filipfri/Alvis/clusterEnv/lib/python3.6/site-packages/torch/serialization.py", line 211, in __init__
    super(_open_file, self).__init__(open(name, mode))
FileNotFoundError: [Errno 2] No such file or directory: 'Second_Interation/Output_Test/checkpoint.pth.tar'
Program finished with exit code 1 at: Sun Apr 11 17:32:50 CEST 2021
whole second iteration done no meme today
